# Dockerfile simplificado para teste
FROM node:20-alpine

WORKDIR /app

# Copiar package files
COPY src/package*.json ./
RUN npm ci --legacy-peer-deps

# Copiar c√≥digo
COPY src/ ./
COPY .env.production ./

# Ajustar paths no tsconfig
RUN sed -i 's/"src\//".\//g' tsconfig.json

# Modo desenvolvimento para evitar problemas de build
ENV NODE_ENV=development
ENV PORT=3000

EXPOSE 3000

CMD ["npm", "run", "dev"]