# Implementa√ß√£o Pr√°tica com Claude Code

## üöÄ Guia de Implementa√ß√£o R√°pida

### 1. Setup Inicial

#### Pr√©-requisitos
```bash
# Python 3.8+
python3 --version

# Pip
pip install aiohttp asyncio python-dotenv

# Claude CLI instalado e configurado
claude --version
```

#### Estrutura de Diret√≥rios
```bash
# Criar estrutura necess√°ria
mkdir -p /home/strapi/thecryptofrontier/claude-agents/tasks/processed
mkdir -p /home/strapi/thecryptofrontier/agentes-python/claude-agentes-blog
```

### 2. Configura√ß√£o do Ambiente

#### `.env` file
```bash
# Strapi Configuration
STRAPI_URL=https://ale-blog.agentesintegrados.com
STRAPI_API_TOKEN=seu_token_aqui

# Paths
TASKS_DIR=/home/strapi/thecryptofrontier/claude-agents/tasks
```

### 3. Implementa√ß√£o B√°sica

#### Exemplo 1: Criar Post Simples
```python
import asyncio
from claude_cli_blog_agent import ClaudeCLIBlogAgent

async def criar_post_basico():
    agent = ClaudeCLIBlogAgent()
    
    # Definir contexto do post
    context = {
        'topic': 'Tend√™ncias de IA para 2025',
        'keywords': ['intelig√™ncia artificial', 'tend√™ncias', '2025', 'tecnologia'],
        'style': 'informativo e acess√≠vel'
    }
    
    # Criar tarefa
    task_file = agent.create_task_file('create_post', context)
    print(f"Tarefa criada: {task_file}")
    
    # Instru√ß√µes para o usu√°rio
    print("\nüìã Pr√≥ximos passos:")
    print("1. Abra o arquivo de tarefa")
    print("2. Copie o conte√∫do")
    print("3. Cole no Claude CLI")
    print("4. Salve o resultado como JSON")

# Executar
asyncio.run(criar_post_basico())
```

#### Exemplo 2: Monitor Autom√°tico
```python
# monitor.py
import asyncio
from claude_cli_blog_agent import monitor_outputs

async def main():
    print("ü§ñ Monitor de Posts Iniciado")
    print("Verificando novos outputs a cada 30 segundos...")
    print("Pressione Ctrl+C para parar\n")
    
    await monitor_outputs()

if __name__ == "__main__":
    asyncio.run(main())
```

### 4. Workflow Completo

#### Script de Workflow (`workflow.py`)
```python
#!/usr/bin/env python3
import asyncio
import os
import json
from pathlib import Path
from datetime import datetime
from claude_cli_blog_agent import ClaudeCLIBlogAgent

class BlogWorkflow:
    def __init__(self):
        self.agent = ClaudeCLIBlogAgent()
        self.tasks_dir = Path(os.getenv('TASKS_DIR', './tasks'))
        
    async def criar_serie_posts(self, topicos):
        """Cria m√∫ltiplos posts em sequ√™ncia"""
        tarefas = []
        
        for topico in topicos:
            print(f"\nüìù Criando tarefa para: {topico['titulo']}")
            
            context = {
                'topic': topico['titulo'],
                'keywords': topico['keywords'],
                'style': topico.get('estilo', 'profissional')
            }
            
            task_file = self.agent.create_task_file('create_post', context)
            tarefas.append(task_file)
            
            # Pequeno delay entre cria√ß√µes
            await asyncio.sleep(1)
        
        print(f"\n‚úÖ {len(tarefas)} tarefas criadas!")
        return tarefas
    
    async def verificar_status(self):
        """Verifica status das tarefas"""
        pendentes = list(self.tasks_dir.glob('create_post_*.md'))
        outputs = list(self.tasks_dir.glob('output_*.json'))
        processados = list((self.tasks_dir / 'processed').glob('*.json'))
        
        print("\nüìä Status do Sistema:")
        print(f"  üìã Tarefas pendentes: {len(pendentes)}")
        print(f"  üìÑ Outputs aguardando: {len(outputs)}")
        print(f"  ‚úÖ Posts processados: {len(processados)}")
        
        return {
            'pendentes': len(pendentes),
            'outputs': len(outputs),
            'processados': len(processados)
        }

# Uso
async def main():
    workflow = BlogWorkflow()
    
    # Criar s√©rie de posts sobre IA
    topicos = [
        {
            'titulo': 'ChatGPT vs Claude: Compara√ß√£o Completa',
            'keywords': ['chatgpt', 'claude', 'ia', 'compara√ß√£o'],
            'estilo': 'comparativo e objetivo'
        },
        {
            'titulo': 'Como Usar IA para Marketing Digital',
            'keywords': ['ia marketing', 'automa√ß√£o', 'digital'],
            'estilo': 'pr√°tico com exemplos'
        }
    ]
    
    await workflow.criar_serie_posts(topicos)
    await workflow.verificar_status()

if __name__ == "__main__":
    asyncio.run(main())
```

### 5. Templates Customizados

#### Template para Review de Produtos
```python
def create_review_template(product_name, category):
    return f"""
# Tarefa: Review Completo de Produto

## Produto: {product_name}
## Categoria: {category}

## Estrutura Requerida:

### 1. Introdu√ß√£o (200 palavras)
- Contexto do produto
- Import√¢ncia no mercado
- Primeira impress√£o

### 2. Caracter√≠sticas Principais (400 palavras)
- Especifica√ß√µes t√©cnicas
- Diferenciais
- Compara√ß√£o com concorrentes

### 3. Pr√≥s e Contras (300 palavras)
- Lista detalhada de vantagens
- Pontos de melhoria
- Para quem √© indicado

### 4. Experi√™ncia de Uso (400 palavras)
- Casos pr√°ticos
- Performance real
- Facilidade de uso

### 5. Pre√ßo e Custo-Benef√≠cio (200 palavras)
- An√°lise de pre√ßo
- Compara√ß√£o de mercado
- Vale a pena?

### 6. Conclus√£o (200 palavras)
- Resumo geral
- Nota final (0-10)
- Recomenda√ß√£o

## Requisitos SEO:
- T√≠tulo: m√°x 60 caracteres
- Meta descri√ß√£o: 150-160 caracteres
- Palavras-chave: {product_name}, review, an√°lise, {category}
- Usar heading tags apropriadas

## Formato de Sa√≠da:
JSON estruturado conforme padr√£o
"""
```

### 6. Integra√ß√£o com RSS

#### RSS + Claude Code
```python
# rss_claude_integration.py
import feedparser
from claude_cli_blog_agent import ClaudeCLIBlogAgent

class RSSClaudeIntegration:
    def __init__(self):
        self.agent = ClaudeCLIBlogAgent()
        
    async def processar_feed_rss(self, feed_url):
        """Cria posts baseados em feed RSS"""
        feed = feedparser.parse(feed_url)
        
        for entry in feed.entries[:5]:  # Limitar a 5 posts
            context = {
                'topic': f"An√°lise: {entry.title}",
                'keywords': self.extrair_keywords(entry),
                'style': 'an√°lise jornal√≠stica',
                'source_url': entry.link,
                'original_summary': entry.summary
            }
            
            # Criar tarefa de an√°lise
            task_file = self.agent.create_task_file('analyze_article', context)
            print(f"Tarefa criada para: {entry.title}")
            
    def extrair_keywords(self, entry):
        """Extrai palavras-chave do entry RSS"""
        # L√≥gica simplificada
        title_words = entry.title.lower().split()
        keywords = [w for w in title_words if len(w) > 4]
        return keywords[:5]
```

### 7. Automa√ß√£o com Cron

#### Script de Automa√ß√£o (`auto_blog.sh`)
```bash
#!/bin/bash
# Automa√ß√£o de blog com Claude Code

# Configura√ß√µes
PYTHON_PATH="/usr/bin/python3"
SCRIPT_DIR="/home/strapi/thecryptofrontier/agentes-python/claude-agentes-blog"
LOG_DIR="/var/log/claude-blog"

# Criar diret√≥rio de logs
mkdir -p $LOG_DIR

# Fun√ß√£o de log
log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" >> "$LOG_DIR/auto_blog.log"
}

# Verificar novos t√≥picos para posts
check_new_topics() {
    log "Verificando novos t√≥picos..."
    
    # Executar script Python que verifica t√≥picos
    $PYTHON_PATH $SCRIPT_DIR/check_topics.py
}

# Processar outputs pendentes
process_outputs() {
    log "Processando outputs do Claude..."
    
    # Executar monitor por 5 minutos
    timeout 300 $PYTHON_PATH $SCRIPT_DIR/monitor.py
}

# Executar workflow
log "Iniciando workflow autom√°tico"
check_new_topics
process_outputs
log "Workflow conclu√≠do"
```

#### Configurar no Cron
```bash
# Editar crontab
crontab -e

# Adicionar linha para executar a cada 4 horas
0 */4 * * * /home/strapi/scripts/auto_blog.sh

# Verificar outputs a cada 30 minutos
*/30 * * * * cd /home/strapi/thecryptofrontier/agentes-python/claude-agentes-blog && python3 monitor.py
```

### 8. Debugging e Troubleshooting

#### Debug Mode
```python
# debug_mode.py
import logging
from claude_cli_blog_agent import ClaudeCLIBlogAgent

# Configurar logging detalhado
logging.basicConfig(
    level=logging.DEBUG,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('claude_blog_debug.log'),
        logging.StreamHandler()
    ]
)

class DebugClaudeAgent(ClaudeCLIBlogAgent):
    def create_task_file(self, task_type, context):
        logging.debug(f"Criando tarefa: {task_type}")
        logging.debug(f"Contexto: {context}")
        
        result = super().create_task_file(task_type, context)
        
        logging.info(f"Tarefa criada: {result}")
        return result
```

### 9. M√©tricas e Analytics

#### Coletor de M√©tricas
```python
# metrics_collector.py
import json
from datetime import datetime
from pathlib import Path

class BlogMetrics:
    def __init__(self):
        self.metrics_file = Path('blog_metrics.json')
        self.load_metrics()
    
    def load_metrics(self):
        if self.metrics_file.exists():
            with open(self.metrics_file, 'r') as f:
                self.metrics = json.load(f)
        else:
            self.metrics = {
                'total_posts': 0,
                'posts_by_topic': {},
                'average_processing_time': 0,
                'success_rate': 100
            }
    
    def track_post(self, topic, processing_time, success=True):
        self.metrics['total_posts'] += 1
        
        # Track por t√≥pico
        if topic not in self.metrics['posts_by_topic']:
            self.metrics['posts_by_topic'][topic] = 0
        self.metrics['posts_by_topic'][topic] += 1
        
        # Atualizar taxa de sucesso
        if not success:
            total = self.metrics['total_posts']
            successful = int(total * self.metrics['success_rate'] / 100)
            self.metrics['success_rate'] = (successful / total) * 100
        
        # Salvar m√©tricas
        self.save_metrics()
    
    def save_metrics(self):
        with open(self.metrics_file, 'w') as f:
            json.dump(self.metrics, f, indent=2)
    
    def get_report(self):
        return f"""
        üìä Relat√≥rio de M√©tricas do Blog
        
        Total de Posts: {self.metrics['total_posts']}
        Taxa de Sucesso: {self.metrics['success_rate']:.1f}%
        
        Posts por T√≥pico:
        {json.dumps(self.metrics['posts_by_topic'], indent=2)}
        """
```

### 10. Boas Pr√°ticas

#### Checklist de Qualidade
```python
def validar_output_claude(output_json):
    """Valida output antes de publicar"""
    required_fields = ['title', 'content', 'slug', 'excerpt']
    
    # Verificar campos obrigat√≥rios
    for field in required_fields:
        if field not in output_json:
            return False, f"Campo obrigat√≥rio ausente: {field}"
    
    # Verificar tamanhos
    if len(output_json['title']) > 60:
        return False, "T√≠tulo muito longo (m√°x 60 caracteres)"
    
    if len(output_json['content']) < 500:
        return False, "Conte√∫do muito curto (m√≠n 500 caracteres)"
    
    if len(output_json['excerpt']) > 160:
        return False, "Excerpt muito longo (m√°x 160 caracteres)"
    
    return True, "Output v√°lido"
```

### üéØ Dicas Finais

1. **Sempre revisar**: Mesmo com Claude, revisar antes de publicar
2. **Backup regular**: Manter c√≥pias das tarefas e outputs
3. **Monitorar logs**: Verificar regularmente por erros
4. **Otimizar prompts**: Refinar templates baseado nos resultados
5. **Medir performance**: Usar m√©tricas para melhorar o processo