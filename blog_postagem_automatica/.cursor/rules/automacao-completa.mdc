---
description: 
globs: 
alwaysApply: true
---
# Automação de Blog - Fluxo Completo

Este sistema automatiza a criação de posts de blog sobre criptomoedas, seguindo três etapas distintas:

## 1. Monitoramento e Tradução
Comando: `python main.py` ou `python main.py --loop <minutos>`

Este processo:
- Monitora feeds RSS de sites de criptomoedas (configurado em [crewai/config.py](mdc:crewai/config.py))
- Traduz os artigos do inglês para português usando Google Gemini
- Salva os artigos traduzidos na pasta [posts_traduzidos/](mdc:posts_traduzidos)
- NÃO publica diretamente no Sanity (`PUBLISH_DIRECTLY = False` em [main.py](mdc:main.py))

## 2. Publicação no Sanity CMS
Comando: `node scripts/publicar_posts_markdown.js`

Este processo:
- Lê os arquivos Markdown da pasta [posts_traduzidos/](mdc:posts_traduzidos)
- Publica os posts no Sanity CMS usando as credenciais do arquivo .env
- Move os arquivos processados para a pasta `posts_publicados/`
- Exibe um resumo dos posts publicados

## 3. Indexação no Algolia
Comando: `node scripts/indexar-sanity-para-algolia.js`

Este processo:
- Busca todos os posts do Sanity CMS
- Indexa-os no Algolia para permitir busca rápida
- Configura os atributos de busca adequados

## Fluxo de Execução Ideal

### Usando o Script Executável

Para simplificar a execução, use o script [executar_fluxo_completo.sh](mdc:executar_fluxo_completo.sh):

```bash
# Executar o fluxo completo (uma vez)
./executar_fluxo_completo.sh

# Ou apenas o monitoramento contínuo
./executar_fluxo_completo.sh --monitor

# Ou apenas a publicação dos posts traduzidos
./executar_fluxo_completo.sh --publish

# Ou apenas a indexação no Algolia
./executar_fluxo_completo.sh --index
```

### Execução Manual

Alternativamente, você pode executar cada etapa manualmente:

```bash
# Passo 1: Iniciar o monitoramento RSS (em um terminal dedicado)
python main.py --loop 60  # Verificar a cada 60 minutos

# Passo 2: Periodicamente, publicar os posts traduzidos (em outro terminal)
node scripts/publicar_posts_markdown.js

# Passo 3: Após a publicação, indexar no Algolia
node scripts/indexar-sanity-para-algolia.js
```

## Arquivos de Configuração Importantes

- [.env](mdc:.env) - Credenciais do Sanity e Algolia
- [crewai/config.py](mdc:crewai/config.py) - Configurações do feed RSS e Gemini API
- [main.py](mdc:main.py) - Configuração principal do sistema

## Observações Importantes

1. NUNCA altere `PUBLISH_DIRECTLY` para `True` em main.py
2. Verifique sempre se o diretório `posts_publicados/` existe
3. As credenciais no arquivo `.env` devem estar atualizadas
4. Caso precise republicar um post, mova-o de volta para a pasta `posts_traduzidos/`
